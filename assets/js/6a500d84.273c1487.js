"use strict";(globalThis.webpackChunksisdk_doc_site=globalThis.webpackChunksisdk_doc_site||[]).push([[71],{6759:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>l,contentTitle:()=>t,default:()=>m,frontMatter:()=>c,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"overseas-huawei-hms/purchase","title":"\u5185\u8d2d\u529f\u80fd","description":"\u8bf4\u660e","source":"@site/docs/overseas-huawei-hms/purchase.mdx","sourceDirName":"overseas-huawei-hms","slug":"/overseas-huawei-hms/purchase","permalink":"/SISDKDocSiteDemo/docs/overseas-huawei-hms/purchase","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"overseasHuaWeiHMSSidebar","previous":{"title":"\u5e7f\u544a\u64ad\u653e","permalink":"/SISDKDocSiteDemo/docs/overseas-huawei-hms/ads"},"next":{"title":"\u6784\u5efa","permalink":"/SISDKDocSiteDemo/docs/overseas-huawei-hms/build"}}');var s=a(4848),r=a(8453);const c={},t="\u5185\u8d2d\u529f\u80fd",l={},d=[{value:"\u8bf4\u660e",id:"\u8bf4\u660e",level:2},{value:"\u914d\u7f6e\u5185\u8d2d\u5546\u54c1",id:"\u914d\u7f6e\u5185\u8d2d\u5546\u54c1",level:3},{value:"\u8d2d\u4e70\u5546\u54c1",id:"\u8d2d\u4e70\u5546\u54c1",level:2},{value:"\u5185\u8d2d\u6062\u590d",id:"\u5185\u8d2d\u6062\u590d",level:2},{value:"\u6d88\u8017\u578b",id:"\u6d88\u8017\u578b",level:3},{value:"\u975e\u6d88\u8017\u578b",id:"\u975e\u6d88\u8017\u578b",level:3},{value:"\u8ba2\u9605\u578b",id:"\u8ba2\u9605\u578b",level:3},{value:"\u83b7\u53d6\u914d\u7f6e\u7684\u5546\u54c1\u5217\u8868",id:"\u83b7\u53d6\u914d\u7f6e\u7684\u5546\u54c1\u5217\u8868",level:2},{value:"\u67e5\u8be2\u5546\u54c1\u662f\u5426\u53ef\u7528",id:"\u67e5\u8be2\u5546\u54c1\u662f\u5426\u53ef\u7528",level:2},{value:"\u6d88\u8017\u578b",id:"\u6d88\u8017\u578b-1",level:3},{value:"\u975e\u6d88\u8017\u578b",id:"\u975e\u6d88\u8017\u578b-1",level:3},{value:"\u8ba2\u9605\u578b",id:"\u8ba2\u9605\u578b-1",level:3},{value:"\u7f16\u8f91\u8ba2\u9605",id:"\u7f16\u8f91\u8ba2\u9605",level:2},{value:"\u7ba1\u7406\u7279\u5b9a\u8ba2\u9605\u5546\u54c1",id:"\u7ba1\u7406\u7279\u5b9a\u8ba2\u9605\u5546\u54c1",level:3},{value:"\u7ba1\u7406\u6240\u6709\u8ba2\u9605\u5546\u54c1",id:"\u7ba1\u7406\u6240\u6709\u8ba2\u9605\u5546\u54c1",level:3}];function o(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"\u5185\u8d2d\u529f\u80fd",children:"\u5185\u8d2d\u529f\u80fd"})}),"\n",(0,s.jsx)(n.h2,{id:"\u8bf4\u660e",children:"\u8bf4\u660e"}),"\n",(0,s.jsx)(n.admonition,{title:"\u63d0\u793a",type:"info",children:(0,s.jsxs)(n.p,{children:["\u5185\u8d2d\u9700\u8981\u767b\u5f55\u534e\u4e3a\u8d26\u53f7\uff0c",(0,s.jsx)(n.code,{children:"sdk"})," \u5185\u90e8\u5df2\u505a\u5904\u7406\uff0c\u5e94\u7528\u4fa7\u65e0\u9700\u5173\u6ce8\u3002"]})}),"\n",(0,s.jsx)(n.h3,{id:"\u914d\u7f6e\u5185\u8d2d\u5546\u54c1",children:"\u914d\u7f6e\u5185\u8d2d\u5546\u54c1"}),"\n",(0,s.jsxs)(n.p,{children:["\u5728\u534e\u4e3a\u5f00\u53d1\u8005\u540e\u53f0\u548c ",(0,s.jsx)(n.code,{children:"HMS Kit Settings"})," \u4e2d\u914d\u7f6e\u5185\u8d2d\u5546\u54c1\u3002"]}),"\n",(0,s.jsx)(n.p,{children:"\u56fe"}),"\n",(0,s.jsx)(n.p,{children:"\u56fe"}),"\n",(0,s.jsx)(n.h2,{id:"\u8d2d\u4e70\u5546\u54c1",children:"\u8d2d\u4e70\u5546\u54c1"}),"\n",(0,s.jsx)(n.admonition,{title:"\u63d0\u793a",type:"info",children:(0,s.jsxs)(n.p,{children:["\u652f\u6301\uff1a\u6d88\u8017\u578b\u3001\u975e\u6d88\u8017\u578b\u3001\u8ba2\u9605\u578b\uff0c\u76f4\u63a5\u4f20\u9012\u5546\u54c1 ",(0,s.jsx)(n.code,{children:"id"})," \u5373\u53ef\u3002"]})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-c#",metastring:'title="\u5b9a\u4e49"',children:'/// <summary>\n/// \u8d2d\u4e70\u5546\u54c1\uff1a\u6d88\u8017\u578b\u3001\u975e\u6d88\u8017\u578b\u3001\u8ba2\u9605\u578b\n/// </summary>\n/// <param name="productId">\u5546\u54c1 id\uff1a\u652f\u6301\u6d88\u8017\u578b\u3001\u975e\u6d88\u8017\u578b\u3001\u8ba2\u9605\u578b</param>\n/// <param name="price">\u4ef7\u683c\uff1a\u4e0d\u53c2\u4e0e\u771f\u5b9e\u5185\u8d2d\uff0c\u53ef\u81ea\u884c\u5904\u7406</param>\n/// <param name="label">\u5546\u54c1 label</param>\n/// <param name="onPaymentSuccess">HMS \u6536\u94f6\u53f0\u4ed8\u6b3e\u56de\u8c03\u6210\u529f\uff0c\u4e0d\u8868\u793a\u6700\u7ec8\u6210\u529f</param>\n/// <param name="onSuccess">\u4ed8\u6b3e\u6210\u529f</param>\n/// <param name="onFail">\u4ed8\u6b3e\u5931\u8d25</param>\n/// <returns></returns>\npublic static IEnumerator PurchaseProduct(\n    string productId, float price, string label, Action<string> onPaymentSuccess, Action<string> onSuccess, Action<ErrCode> onFail\n)\n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-c#",metastring:'title="\u793a\u4f8b"',children:'StartCoroutine(IAP.PurchaseProduct("com.test.xiaohao", 1, "label",  null, (msg) => {\n    Debug.Log("\u8d2d\u4e70\u6d88\u8017\u578b\u5546\u54c1\u6210\u529f\uff0c\u5546\u54c1id\u662f\uff1a" + msg);\n}, (errCode) => {\n    Debug.LogError("\u8d2d\u4e70\u6d88\u8017\u578b\u5546\u54c1\u5931\u8d25\uff0c\u9519\u8bef\u7801\u662f\uff1a" + errCode);\n}));\n'})}),"\n",(0,s.jsx)(n.h2,{id:"\u5185\u8d2d\u6062\u590d",children:"\u5185\u8d2d\u6062\u590d"}),"\n",(0,s.jsx)(n.admonition,{title:"\u63d0\u793a",type:"danger",children:(0,s.jsxs)(n.p,{children:["\u9700\u8981\u5728\u76f8\u5173\u9875\u9762\uff08\u6bd4\u5982\u8bbe\u7f6e\u9875\u9762\uff09\u5185\u6dfb\u52a0\u5185\u8d2d\u6062\u590d\uff0c\u5bf9",(0,s.jsx)(n.strong,{children:"\u6d88\u8017\u578b"}),"\u5546\u54c1\u8fdb\u884c\u8865\u5355\u3002"]})}),"\n",(0,s.jsx)(n.h3,{id:"\u6d88\u8017\u578b",children:"\u6d88\u8017\u578b"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-c#",metastring:'title="\u5b9a\u4e49"',children:'// <summary>\n/// \u6062\u590d\u6d88\u8017\u578b\u5185\u8d2d\n/// </summary>\n/// <param name="onSuccess">\u6210\u529f\u56de\u8c03</param>\n/// <param name="onFail">\u5931\u8d25\u56de\u8c03</param>\npublic static void RestoreOwnedConsumableRecords(Action<List<string>> onSuccess, Action onFail)\n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-c#",metastring:'title="\u793a\u4f8b"',children:"IAP.RestoreOwnedConsumableRecords(ids => { }, () => { });\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u975e\u6d88\u8017\u578b",children:"\u975e\u6d88\u8017\u578b"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-c#",metastring:'title="\u5b9a\u4e49"',children:'// <summary>\n/// \u6062\u590d\u975e\u6d88\u8017\u578b\u5185\u8d2d\n/// </summary>\n/// <param name="onSuccess">\u6210\u529f\u56de\u8c03</param>\n/// <param name="onFail">\u5931\u8d25\u56de\u8c03</param>\npublic static void RestoreOwnedNonConsumableRecords(Action<List<string>> onSuccess, Action onFail)\n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-c#",metastring:'title="\u793a\u4f8b"',children:"IAP.RestoreOwnedNonConsumableRecords(ids => { }, () => { });\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u8ba2\u9605\u578b",children:"\u8ba2\u9605\u578b"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-c#",metastring:'title="\u5b9a\u4e49"',children:'// <summary>\n/// \u6062\u590d\u8ba2\u9605\u578b\u5185\u8d2d\n/// </summary>\n/// <param name="onSuccess">\u6210\u529f\u56de\u8c03</param>\n/// <param name="onFail">\u5931\u8d25\u56de\u8c03</param>\npublic static void RestoreOwnedSubscriptionRecords(Action<List<string>> onSuccess, Action onFail)\n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-c#",metastring:'title="\u793a\u4f8b"',children:"IAP.RestoreOwnedSubscriptionRecords(ids => { }, () => { });\n"})}),"\n",(0,s.jsx)(n.h2,{id:"\u83b7\u53d6\u914d\u7f6e\u7684\u5546\u54c1\u5217\u8868",children:"\u83b7\u53d6\u914d\u7f6e\u7684\u5546\u54c1\u5217\u8868"}),"\n",(0,s.jsx)(n.admonition,{title:"\u63d0\u793a",type:"info",children:(0,s.jsx)(n.p,{children:"\u53ef\u901a\u8fc7\u5546\u54c1\u5217\u8868\u6765\u663e\u793a\u7ecf\u8fc7\u672c\u5730\u5316\u5904\u7406\u7684\u5546\u54c1\u4ef7\u683c\u3002"})}),"\n",(0,s.jsx)(n.admonition,{title:"\u63d0\u793a",type:"success",children:(0,s.jsxs)(n.p,{children:["\u83b7\u53d6\u6210\u529f\u540e\uff0c\u5546\u54c1\u5217\u8868\u5c31\u53ef\u4ee5\u901a\u8fc7 ",(0,s.jsx)(n.code,{children:"SI.productList"})," \u8bbf\u95ee\u5230\uff0c\u65e0\u9700\u91cd\u590d\u83b7\u53d6\u3002"]})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-c#",metastring:'title="\u5b9a\u4e49"',children:'/// <summary>\n/// \u83b7\u53d6\u914d\u7f6e\u7684\u5546\u54c1\u5217\u8868\n/// </summary>\n/// <param name="onSuccess"></param>\n/// <param name="onFail"></param>\npublic static void FetchAllProducts(Action<List<ProductInfo>> onSuccess, Action<ErrCode> onFail) \n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-c#",metastring:'title="\u793a\u4f8b"',children:'IAP.FetchAllProducts(list => {\n    for (var i = 0; i < list.Count; i++) {\n        Debug.Log($"HMSIAPManager product list {i} {list[i].ProductId}");\n    }\n}, err => {\n    Debug.Log("HMSIAPManager \u83b7\u53d6\u5546\u54c1\u5217\u8868\u5931\u8d25");\n}); \n'})}),"\n",(0,s.jsx)(n.h2,{id:"\u67e5\u8be2\u5546\u54c1\u662f\u5426\u53ef\u7528",children:"\u67e5\u8be2\u5546\u54c1\u662f\u5426\u53ef\u7528"}),"\n",(0,s.jsx)(n.h3,{id:"\u6d88\u8017\u578b-1",children:"\u6d88\u8017\u578b"}),"\n",(0,s.jsx)(n.p,{children:"\u4e0d\u5b58\u5728\u8be5\u65b9\u6cd5\u3002"}),"\n",(0,s.jsx)(n.h3,{id:"\u975e\u6d88\u8017\u578b-1",children:"\u975e\u6d88\u8017\u578b"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-c#",metastring:'title="\u5b9a\u4e49"',children:'/// <summary>\n/// \u67e5\u8be2\u975e\u6d88\u8017\u578b\u5546\u54c1\u662f\u5426\u53ef\u7528\n/// </summary>\n/// <param name="productId">\u5546\u54c1 id</param>\n/// <param name="callback">\u6210\u529f/\u5931\u8d25\u56de\u8c03</param>\npublic static void IsNonConsumablePurchaseAvailable(string productId, Action<bool> callback)\n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-c#",metastring:'title="\u793a\u4f8b"',children:'IAP.IsNonConsumablePurchaseAvailable("com.test.feixiaohao", isAvailable => {\n    Debug.Log($"[IAP] \u975e\u6d88\u8017\u5546\u54c1\u662f\u5426\u53ef\u7528\uff1a{isAvailable}");\n    stateText.text = "\u975e\u6d88\u8017\u578b\u5546\u54c1\uff1a" + (isAvailable ? "\u53ef\u7528" : "\u4e0d\u53ef\u7528");\n});\n'})}),"\n",(0,s.jsx)(n.h3,{id:"\u8ba2\u9605\u578b-1",children:"\u8ba2\u9605\u578b"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-c#",metastring:'title="\u5b9a\u4e49"',children:'/// <summary>\n/// \u67e5\u8be2\u8ba2\u9605\u578b\u5546\u54c1\u662f\u5426\u53ef\u7528\n/// </summary>\n/// <param name="productId">\u5546\u54c1 id</param>\n/// <param name="callback">\u6210\u529f/\u5931\u8d25\u56de\u8c03</param>\npublic static void IsSubscriptionPurchaseAvailable(string productId, Action<bool> callback) \n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-c#",metastring:'title="\u793a\u4f8b"',children:'IAP.IsSubscriptionPurchaseAvailable("com.test.dingyue", isAvailable => {\n    Debug.Log($"[IAP] \u8ba2\u9605\u5546\u54c1\u662f\u5426\u53ef\u7528\uff1a{isAvailable}");\n    stateText.text = "\u8ba2\u9605\u578b\u5546\u54c1\uff1a" + (isAvailable ? "\u53ef\u7528" : "\u4e0d\u53ef\u7528");\n});\n'})}),"\n",(0,s.jsx)(n.h2,{id:"\u7f16\u8f91\u8ba2\u9605",children:"\u7f16\u8f91\u8ba2\u9605"}),"\n",(0,s.jsx)(n.admonition,{title:"\u63d0\u793a",type:"info",children:(0,s.jsx)(n.p,{children:"\u4f1a\u6253\u5f00\u534e\u4e3a\u624b\u673a\u7684\u539f\u751f\u8ba2\u9605\u7f16\u8f91\u9875\u9762\u3002"})}),"\n",(0,s.jsx)(n.h3,{id:"\u7ba1\u7406\u7279\u5b9a\u8ba2\u9605\u5546\u54c1",children:"\u7ba1\u7406\u7279\u5b9a\u8ba2\u9605\u5546\u54c1"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-c#",metastring:'title="\u5b9a\u4e49"',children:'/// <summary>\n/// \u6253\u5f00\u7279\u5b9a\u8ba2\u9605\u5546\u54c1\u7f16\u8f91\u9875\u9762\n/// </summary>\n/// <param name="SubscribeProductId">\u8ba2\u9605\u578b\u5546\u54c1 id</param>\npublic void RedirectingtoSubscriptionEditingScreen(string SubscribeProductId)\n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-c#",metastring:'title="\u793a\u4f8b"',children:'HMSIAPManager.Instance.RedirectingtoSubscriptionEditingScreen("com.test.dingyue");\n'})}),"\n",(0,s.jsx)(n.h3,{id:"\u7ba1\u7406\u6240\u6709\u8ba2\u9605\u5546\u54c1",children:"\u7ba1\u7406\u6240\u6709\u8ba2\u9605\u5546\u54c1"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-c#",metastring:'title="\u5b9a\u4e49"',children:"/// <summary>\n/// \u6253\u5f00\u7ba1\u7406\u6240\u6709\u8ba2\u9605\u5546\u54c1\u7f16\u8f91\u9875\u9762\n/// </summary>\npublic void RedirectingtoSubscriptionManagementScreen()\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-c#",metastring:'title="\u793a\u4f8b"',children:"HMSIAPManager.Instance.RedirectingtoSubscriptionManagementScreen();\n"})})]})}function m(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},8453:(e,n,a)=>{a.d(n,{R:()=>c,x:()=>t});var i=a(6540);const s={},r=i.createContext(s);function c(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);